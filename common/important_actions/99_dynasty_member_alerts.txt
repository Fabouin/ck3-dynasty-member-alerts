action_dynasty_member_can_be_invited = {
	combine_into_one = yes
	priority = 100
	check_create_action = {
		root.dynasty = {
			every_dynasty_member = {
				limit = {
					root = {
						is_character_interaction_potentially_accepted = {
							recipient = prev
							interaction = invite_to_court_interaction
						}
					}
				}

				try_create_important_action = {
					important_action_type = action_dynasty_member_can_be_invited
					actor = root
					recipient = this
				}
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = invite_to_court_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}

action_dynasty_member_can_marry = {
	combine_into_one = yes
	priority = 99
	check_create_action = {
		every_courtier = {
			limit = {
				NAND = {
					is_landed = yes
					is_close_family_of = root
				}
				is_married = no
				is_betrothed = no
				is_adult = yes
				dynasty = root.dynasty
				can_marry_trigger = yes
				root = {
					is_character_interaction_valid = {
						recipient = prev
						interaction = marry_off_interaction
					}
				}
				is_visibly_fertile = yes
			}
			try_create_important_action = {
				important_action_type = action_dynasty_member_can_marry
				actor = root
				recipient = this
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = marry_off_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}

action_can_assign_guardian_to_dynasty_kid = {
	priority = 98
	combine_into_one = yes
	check_create_action = {
		every_courtier = {
			limit = {
				NOT = {
					is_child_of = root
				}
				is_adult = no
				num_of_relation_guardian = 0
				age >= childhood_education_start_age
				dynasty = root.dynasty
				exists = liege
				liege = root
				root = {
					is_character_interaction_valid = {
						recipient = prev
						interaction = educate_child_interaction
					}
				}
			}
			try_create_important_action = {
				important_action_type = action_can_assign_guardian_to_dynasty_kid
				actor = root
				recipient = this
				secondary_recipient = this
			}
		}	
	}

	effect = {
		open_interaction_window = {
			interaction = educate_child_interaction
			actor = scope:actor
			recipient = scope:actor
			secondary_recipient = scope:secondary_recipient
		}
	}
}

action_dynasty_member_can_be_landed = {
	priority = 97
	combine_into_one = yes
	check_create_action = {
		root.dynasty = {
			every_dynasty_member = {
				limit = {
					house = root.house
					is_adult = yes
					is_claimant = no
					OR = {
						AND = {
							age <= 30
							is_visibly_fertile = yes
						}
						any_child = {
							count > 0
						}
					}
					root = {
						is_character_interaction_valid = {
							recipient = prev
							interaction = grant_titles_interaction
						}
					}
				}
				try_create_important_action = {
					important_action_type = action_dynasty_member_can_be_landed
					actor = root
					recipient = this
					secondary_recipient = this
				}
			}
		}
	}

	unimportant = {
		scope:recipient = {
			OR = {
				father = {
					house = root.house
					is_claimant = no
					root = {
						is_character_interaction_valid = {
							recipient = prev
							interaction = grant_titles_interaction
						}
					}
				}
				mother = {
					house = root.house
					is_claimant = no
					root = {
						is_character_interaction_valid = {
							recipient = prev
							interaction = grant_titles_interaction
						}
					}
				}
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = grant_titles_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}
